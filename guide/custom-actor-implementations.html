<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Custom Actor Implementations | Naninovel</title>
    <meta name="generator" content="VuePress 1.5.2">
    <link rel="icon" href="/assets/img/logo.png">
    <link rel="manifest" href="/manifest.json">
    <link rel="apple-touch-icon" href="/assets/icons/apple-touch-icon-152x152.png">
    <link rel="mask-icon" href="/assets/icons/safari-pinned-tab.svg" color="#3eaf7c">
    <meta name="description" content="A full-featured, writer-friendly and completely customizable visual novel extension for Unity game engine.">
    <meta name="theme-color" content="#4985c2">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="og:image" content="/assets/img/og.jpg">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="msapplication-TileImage" content="/assets/icons/msapplication-icon-144x144.png">
    <meta name="msapplication-TileColor" content="#000000">
    <meta name="google-site-verification" content="cdvgJ2XFFbaGErDKJtTbFj9u9frfReZ9rzUnsf9F6nI">
    <link rel="preload" href="/assets/css/0.styles.49cf1a7f.css" as="style"><link rel="preload" href="/assets/js/app.7282dbad.js" as="script"><link rel="preload" href="/assets/js/3.edd03593.js" as="script"><link rel="preload" href="/assets/js/17.2a490325.js" as="script"><link rel="prefetch" href="/assets/js/10.de790810.js"><link rel="prefetch" href="/assets/js/100.629dc482.js"><link rel="prefetch" href="/assets/js/101.03f7d98b.js"><link rel="prefetch" href="/assets/js/102.5f2b25d8.js"><link rel="prefetch" href="/assets/js/103.d1a3a158.js"><link rel="prefetch" href="/assets/js/104.dde63a15.js"><link rel="prefetch" href="/assets/js/105.885e262b.js"><link rel="prefetch" href="/assets/js/106.951474eb.js"><link rel="prefetch" href="/assets/js/107.644cc7e2.js"><link rel="prefetch" href="/assets/js/108.d0c01a1f.js"><link rel="prefetch" href="/assets/js/109.3ba832ad.js"><link rel="prefetch" href="/assets/js/11.6fd26536.js"><link rel="prefetch" href="/assets/js/110.31f90492.js"><link rel="prefetch" href="/assets/js/111.13e004e0.js"><link rel="prefetch" href="/assets/js/112.afb9b4a5.js"><link rel="prefetch" href="/assets/js/113.84a9a5a5.js"><link rel="prefetch" href="/assets/js/114.e8cc36fc.js"><link rel="prefetch" href="/assets/js/115.b7ba2d1c.js"><link rel="prefetch" href="/assets/js/116.f6dbe2fd.js"><link rel="prefetch" href="/assets/js/117.45f408f7.js"><link rel="prefetch" href="/assets/js/118.0050ec4f.js"><link rel="prefetch" href="/assets/js/119.06a577ff.js"><link rel="prefetch" href="/assets/js/12.f9f9e0c2.js"><link rel="prefetch" href="/assets/js/120.c3d40c27.js"><link rel="prefetch" href="/assets/js/121.980ed559.js"><link rel="prefetch" href="/assets/js/122.eeacf352.js"><link rel="prefetch" href="/assets/js/123.8f70a3a3.js"><link rel="prefetch" href="/assets/js/124.4860a991.js"><link rel="prefetch" href="/assets/js/125.c108ff14.js"><link rel="prefetch" href="/assets/js/126.e6cd1201.js"><link rel="prefetch" href="/assets/js/127.c3341c02.js"><link rel="prefetch" href="/assets/js/128.2b2fe85e.js"><link rel="prefetch" href="/assets/js/129.462564ac.js"><link rel="prefetch" href="/assets/js/13.501d4646.js"><link rel="prefetch" href="/assets/js/130.6c8d6e85.js"><link rel="prefetch" href="/assets/js/131.d1d99dfa.js"><link rel="prefetch" href="/assets/js/132.d2880758.js"><link rel="prefetch" href="/assets/js/133.733b2e6e.js"><link rel="prefetch" href="/assets/js/134.eda200bd.js"><link rel="prefetch" href="/assets/js/135.3a31e0dc.js"><link rel="prefetch" href="/assets/js/136.f81ddc1d.js"><link rel="prefetch" href="/assets/js/137.90c29127.js"><link rel="prefetch" href="/assets/js/138.e916ba65.js"><link rel="prefetch" href="/assets/js/139.83612634.js"><link rel="prefetch" href="/assets/js/14.ca7c5f76.js"><link rel="prefetch" href="/assets/js/140.8e90f261.js"><link rel="prefetch" href="/assets/js/141.d42d1fa4.js"><link rel="prefetch" href="/assets/js/142.ae170e78.js"><link rel="prefetch" href="/assets/js/143.f9888764.js"><link rel="prefetch" href="/assets/js/144.8e58d081.js"><link rel="prefetch" href="/assets/js/145.968817b8.js"><link rel="prefetch" href="/assets/js/146.36bb38a0.js"><link rel="prefetch" href="/assets/js/147.105a7d8e.js"><link rel="prefetch" href="/assets/js/148.2e24332d.js"><link rel="prefetch" href="/assets/js/149.cddcb717.js"><link rel="prefetch" href="/assets/js/15.8ddd12bb.js"><link rel="prefetch" href="/assets/js/150.f0c11477.js"><link rel="prefetch" href="/assets/js/151.9ec01c74.js"><link rel="prefetch" href="/assets/js/152.b83fe3a2.js"><link rel="prefetch" href="/assets/js/153.c849af7f.js"><link rel="prefetch" href="/assets/js/154.d4e93375.js"><link rel="prefetch" href="/assets/js/155.4b85fd4b.js"><link rel="prefetch" href="/assets/js/156.56cb0132.js"><link rel="prefetch" href="/assets/js/157.2eadfc1c.js"><link rel="prefetch" href="/assets/js/158.d17169de.js"><link rel="prefetch" href="/assets/js/159.e9ecefbf.js"><link rel="prefetch" href="/assets/js/16.b1de41e8.js"><link rel="prefetch" href="/assets/js/160.bb04ab5b.js"><link rel="prefetch" href="/assets/js/161.e26eba48.js"><link rel="prefetch" href="/assets/js/162.9dcad9e1.js"><link rel="prefetch" href="/assets/js/163.e8d7058a.js"><link rel="prefetch" href="/assets/js/164.d77339b0.js"><link rel="prefetch" href="/assets/js/165.7f526ee5.js"><link rel="prefetch" href="/assets/js/166.4ce5badc.js"><link rel="prefetch" href="/assets/js/167.71586df0.js"><link rel="prefetch" href="/assets/js/168.4154eb50.js"><link rel="prefetch" href="/assets/js/169.997a87d6.js"><link rel="prefetch" href="/assets/js/170.aa85fe6b.js"><link rel="prefetch" href="/assets/js/171.69acc524.js"><link rel="prefetch" href="/assets/js/172.70f762f3.js"><link rel="prefetch" href="/assets/js/173.95d70253.js"><link rel="prefetch" href="/assets/js/174.f125aa6d.js"><link rel="prefetch" href="/assets/js/175.afb50432.js"><link rel="prefetch" href="/assets/js/176.1bd0d908.js"><link rel="prefetch" href="/assets/js/177.7fec4c7b.js"><link rel="prefetch" href="/assets/js/178.d3cbba08.js"><link rel="prefetch" href="/assets/js/179.ea255785.js"><link rel="prefetch" href="/assets/js/18.7dd676e8.js"><link rel="prefetch" href="/assets/js/180.ae3ec8ad.js"><link rel="prefetch" href="/assets/js/181.741e2273.js"><link rel="prefetch" href="/assets/js/182.06028277.js"><link rel="prefetch" href="/assets/js/183.ca4962f1.js"><link rel="prefetch" href="/assets/js/184.2bace734.js"><link rel="prefetch" href="/assets/js/185.f0fba8ac.js"><link rel="prefetch" href="/assets/js/186.7ec21880.js"><link rel="prefetch" href="/assets/js/187.57651176.js"><link rel="prefetch" href="/assets/js/188.651c35d0.js"><link rel="prefetch" href="/assets/js/189.7804066d.js"><link rel="prefetch" href="/assets/js/19.d418df95.js"><link rel="prefetch" href="/assets/js/190.9b9f90f2.js"><link rel="prefetch" href="/assets/js/191.f3b3061f.js"><link rel="prefetch" href="/assets/js/192.cd897e64.js"><link rel="prefetch" href="/assets/js/193.f1f48d23.js"><link rel="prefetch" href="/assets/js/194.b7efbd77.js"><link rel="prefetch" href="/assets/js/195.2119293e.js"><link rel="prefetch" href="/assets/js/196.b6400034.js"><link rel="prefetch" href="/assets/js/197.9d9279aa.js"><link rel="prefetch" href="/assets/js/198.af1c2046.js"><link rel="prefetch" href="/assets/js/199.53a00c62.js"><link rel="prefetch" href="/assets/js/20.a0ad7c98.js"><link rel="prefetch" href="/assets/js/200.a86ce02e.js"><link rel="prefetch" href="/assets/js/201.65104463.js"><link rel="prefetch" href="/assets/js/202.f8c75a64.js"><link rel="prefetch" href="/assets/js/203.fccfd847.js"><link rel="prefetch" href="/assets/js/21.11ac5469.js"><link rel="prefetch" href="/assets/js/22.da3ccb12.js"><link rel="prefetch" href="/assets/js/23.9de9857a.js"><link rel="prefetch" href="/assets/js/24.b4250a8c.js"><link rel="prefetch" href="/assets/js/25.c52e091c.js"><link rel="prefetch" href="/assets/js/26.a14fa667.js"><link rel="prefetch" href="/assets/js/27.72108e6f.js"><link rel="prefetch" href="/assets/js/28.586975f1.js"><link rel="prefetch" href="/assets/js/29.8414baf2.js"><link rel="prefetch" href="/assets/js/30.ddcbe970.js"><link rel="prefetch" href="/assets/js/31.8a114259.js"><link rel="prefetch" href="/assets/js/32.59883ffb.js"><link rel="prefetch" href="/assets/js/33.282a7666.js"><link rel="prefetch" href="/assets/js/34.436cc377.js"><link rel="prefetch" href="/assets/js/35.2086a203.js"><link rel="prefetch" href="/assets/js/36.ea326b1a.js"><link rel="prefetch" href="/assets/js/37.7f6b3e32.js"><link rel="prefetch" href="/assets/js/38.5a1cd761.js"><link rel="prefetch" href="/assets/js/39.f98394bb.js"><link rel="prefetch" href="/assets/js/4.d5ff7d0b.js"><link rel="prefetch" href="/assets/js/40.3587f15c.js"><link rel="prefetch" href="/assets/js/41.39509676.js"><link rel="prefetch" href="/assets/js/42.bbc9e412.js"><link rel="prefetch" href="/assets/js/43.2fd7508a.js"><link rel="prefetch" href="/assets/js/44.4b0cab28.js"><link rel="prefetch" href="/assets/js/45.cc3dc123.js"><link rel="prefetch" href="/assets/js/46.3821c07c.js"><link rel="prefetch" href="/assets/js/47.f0f2d8e3.js"><link rel="prefetch" href="/assets/js/48.bb27e947.js"><link rel="prefetch" href="/assets/js/49.93cff00c.js"><link rel="prefetch" href="/assets/js/5.fc2ff992.js"><link rel="prefetch" href="/assets/js/50.6246c4ee.js"><link rel="prefetch" href="/assets/js/51.46b7d78a.js"><link rel="prefetch" href="/assets/js/52.110383e8.js"><link rel="prefetch" href="/assets/js/53.721d5fd7.js"><link rel="prefetch" href="/assets/js/54.753ab465.js"><link rel="prefetch" href="/assets/js/55.d9aa0e68.js"><link rel="prefetch" href="/assets/js/56.26c3b51a.js"><link rel="prefetch" href="/assets/js/57.a1b3a83d.js"><link rel="prefetch" href="/assets/js/58.1edd80e3.js"><link rel="prefetch" href="/assets/js/59.965471c3.js"><link rel="prefetch" href="/assets/js/6.489b006c.js"><link rel="prefetch" href="/assets/js/60.43452451.js"><link rel="prefetch" href="/assets/js/61.9b609913.js"><link rel="prefetch" href="/assets/js/62.0c049a8e.js"><link rel="prefetch" href="/assets/js/63.fb347126.js"><link rel="prefetch" href="/assets/js/64.177af9e6.js"><link rel="prefetch" href="/assets/js/65.f784bfdc.js"><link rel="prefetch" href="/assets/js/66.5c768f06.js"><link rel="prefetch" href="/assets/js/67.ca102290.js"><link rel="prefetch" href="/assets/js/68.83231a2c.js"><link rel="prefetch" href="/assets/js/69.88d914bd.js"><link rel="prefetch" href="/assets/js/7.6ab4b01e.js"><link rel="prefetch" href="/assets/js/70.a16525f4.js"><link rel="prefetch" href="/assets/js/71.a3fb68e3.js"><link rel="prefetch" href="/assets/js/72.0b81a8b9.js"><link rel="prefetch" href="/assets/js/73.789d1a4b.js"><link rel="prefetch" href="/assets/js/74.157563c3.js"><link rel="prefetch" href="/assets/js/75.dab2fa9a.js"><link rel="prefetch" href="/assets/js/76.d78fe981.js"><link rel="prefetch" href="/assets/js/77.98495584.js"><link rel="prefetch" href="/assets/js/78.08b722f9.js"><link rel="prefetch" href="/assets/js/79.03cd3831.js"><link rel="prefetch" href="/assets/js/8.78b7911b.js"><link rel="prefetch" href="/assets/js/80.1ba26ff3.js"><link rel="prefetch" href="/assets/js/81.2fc736c4.js"><link rel="prefetch" href="/assets/js/82.d72210e4.js"><link rel="prefetch" href="/assets/js/83.45727ca1.js"><link rel="prefetch" href="/assets/js/84.83e8b806.js"><link rel="prefetch" href="/assets/js/85.bf2b0978.js"><link rel="prefetch" href="/assets/js/86.a52896b5.js"><link rel="prefetch" href="/assets/js/87.9de0a31e.js"><link rel="prefetch" href="/assets/js/88.7e967892.js"><link rel="prefetch" href="/assets/js/89.f3227bef.js"><link rel="prefetch" href="/assets/js/9.77094dac.js"><link rel="prefetch" href="/assets/js/90.cab6f8e3.js"><link rel="prefetch" href="/assets/js/91.e837d088.js"><link rel="prefetch" href="/assets/js/92.70118420.js"><link rel="prefetch" href="/assets/js/93.28b41731.js"><link rel="prefetch" href="/assets/js/94.c560fcb9.js"><link rel="prefetch" href="/assets/js/95.45c8e7a9.js"><link rel="prefetch" href="/assets/js/96.8f97331e.js"><link rel="prefetch" href="/assets/js/97.bbdcc7d9.js"><link rel="prefetch" href="/assets/js/98.a3dd185c.js"><link rel="prefetch" href="/assets/js/99.fe5f172b.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.72c12505.js">
    <link rel="stylesheet" href="/assets/css/0.styles.49cf1a7f.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="https://naninovel.com"><!----> <span class="site-name">Naninovel</span></a> <div class="links"><form id="search-form" role="search" class="algolia-search-wrapper search-box"><input id="algolia-search-input" class="search-query"></form> <nav class="nav-links can-hide"><div class="nav-item"><a href="/faq/" class="nav-link">
  FAQ
</a></div><div class="nav-item"><a href="/guide/" class="nav-link router-link-active">
  Guide
</a></div><div class="nav-item"><a href="/api/" class="nav-link">
  Commands
</a></div><div class="nav-item"><a href="/support/" class="nav-link">
  Support
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Language" class="dropdown-title"><span class="title">Language</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/guide/custom-actor-implementations.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  English
</a></li><li class="dropdown-item"><!----> <a href="/ja/guide/custom-actor-implementations.html" class="nav-link">
  日本語
</a></li><li class="dropdown-item"><!----> <a href="/zh/guide/custom-actor-implementations.html" class="nav-link">
  中文
</a></li><li class="dropdown-item"><!----> <a href="/ru/guide/custom-actor-implementations.html" class="nav-link">
  Русский
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/faq/" class="nav-link">
  FAQ
</a></div><div class="nav-item"><a href="/guide/" class="nav-link router-link-active">
  Guide
</a></div><div class="nav-item"><a href="/api/" class="nav-link">
  Commands
</a></div><div class="nav-item"><a href="/support/" class="nav-link">
  Support
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Language" class="dropdown-title"><span class="title">Language</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/guide/custom-actor-implementations.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  English
</a></li><li class="dropdown-item"><!----> <a href="/ja/guide/custom-actor-implementations.html" class="nav-link">
  日本語
</a></li><li class="dropdown-item"><!----> <a href="/zh/guide/custom-actor-implementations.html" class="nav-link">
  中文
</a></li><li class="dropdown-item"><!----> <a href="/ru/guide/custom-actor-implementations.html" class="nav-link">
  Русский
</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Guide</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Advanced</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/guide/engine-architecture.html" class="sidebar-link">Engine Architecture</a></li><li><a href="/guide/engine-services.html" class="sidebar-link">Engine Services</a></li><li><a href="/guide/custom-commands.html" class="sidebar-link">Custom Commands</a></li><li><a href="/guide/custom-configuration.html" class="sidebar-link">Custom Configuration</a></li><li><a href="/guide/custom-actor-implementations.html" aria-current="page" class="active sidebar-link">Custom Actor Implementations</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/guide/custom-actor-implementations.html#actor-resources" class="sidebar-link">Actor Resources</a></li><li class="sidebar-sub-header"><a href="/guide/custom-actor-implementations.html#custom-metadata" class="sidebar-link">Custom Metadata</a></li><li class="sidebar-sub-header"><a href="/guide/custom-actor-implementations.html#custom-state" class="sidebar-link">Custom State</a></li></ul></li><li><a href="/guide/custom-actor-shader.html" class="sidebar-link">Custom Actor Shader</a></li><li><a href="/guide/custom-parser.html" class="sidebar-link">Custom Script Parser</a></li><li><a href="/guide/state-management.html" class="sidebar-link">State Management</a></li><li><a href="/guide/integration-options.html" class="sidebar-link">Integration Options</a></li><li><a href="/guide/render-pipelines.html" class="sidebar-link">Render Pipelines</a></li><li><a href="/guide/custom-build-environment.html" class="sidebar-link">Custom Build Environment</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Extensions</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="custom-actor-implementations"><a href="#custom-actor-implementations" class="header-anchor">#</a> Custom Actor Implementations</h1> <p>Actor is a scene entity defined by a name, appearance, visibility and transform (position, rotation and scale). It can asynchronously change appearance, visibility and transform over time. Examples of actors are characters, backgrounds, text printers and choice handlers.</p> <p>Actors are represented by <code>IActor</code> interface and its derivatives:</p> <ul><li><code>ICharacterActor</code></li> <li><code>IBackgroundActor</code></li> <li><code>ITextPrinterActor</code></li> <li><code>IChoiceHandlerActor</code></li></ul> <p>Each actor interface can have multiple implementations; e.g. character actors currently have seven built-in implementations: sprite, diced sprite, generic, layered, narrator, Spine and Live2D.</p> <p>Actor implementation can be selected in the configuration managers accessible via <code>Naninovel -&gt; Configuration</code> context menu. You can both change default implementation used for all the actors or set specific implementation per actor. To change default implementation, use <code>Default Metadata</code> property and to set specific ones, use an <code>Implementation</code> drop-down list in actor's configuration.</p> <p><img src="https://i.gyazo.com/74625fa24b58362de15bb8e07753824d.png" alt=""> <img src="https://i.gyazo.com/eeb42043eb9a841de003f8db848f1427.png" alt=""></p> <p>Implementation drop-down list contains all the types that implements specific actor interface. You can add your own custom implementations, and they'll also appear in the list. See <code>Naninovel/Runtime/Actor</code> scripts for a reference when creating your own actor implementation. Consider using <code>MonoBehaviourActor</code> built-in abstract actor implementation to fulfill most of the base interface requirements in case the actor is supposed to be spawned on scene.</p> <p>When creating custom actor implementations, make sure they have a compatible public constructor:</p> <div class="language-csharp extra-class"><pre class="language-csharp"><code><span class="token keyword">public</span> ActorImplementationType <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> id<span class="token punctuation">,</span> <span class="token class-name">ActorMetadata</span> metadata<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>
</code></pre></div><p>— where <code>id</code> is the ID of the actor and <code>metadata</code> — either actor's (when actor record exists in the resources) or a default metadata. When implementing a specific actor interface, it's possible to request corresponding specific metadata (eg, &quot;CharacterMetadata&quot; for &quot;ICharacterActor&quot; implementation).</p> <div class="custom-block warn"><p class="custom-block-title">WARNING</p> <p>When adding custom implementation types under a non-predefined assembly (via <a href="https://docs.unity3d.com/Manual/ScriptCompilationAssemblyDefinitionFiles.html" target="_blank" rel="noopener noreferrer">assembly definitions<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>), add the assembly name to the <code>Type Assemblies</code> list found in the engine configuration menu. Otherwise, the engine won't be able to locate your custom types.</p></div> <div class="custom-block example"><p class="custom-block-title">EXAMPLE</p> <p>For a complete example on adding custom actor implementation see <a href="https://github.com/Naninovel/Live2D" target="_blank" rel="noopener noreferrer">Live2D extension project on GitHub<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>. Specifically, the custom &quot;Live2DCharacter&quot; actor is implemented in <a href="https://github.com/Naninovel/Live2D/blob/master/Assets/NaninovelLive2D/Runtime/Live2DCharacter.cs" target="_blank" rel="noopener noreferrer">Runtime/Live2DCharacter.cs<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> script.</p></div> <h2 id="actor-resources"><a href="#actor-resources" class="header-anchor">#</a> Actor Resources</h2> <p>Apply <code>ActorResources</code> attribute to the implementation type to specify which assets can be used as resources for you custom actor and whether it's allowed to assign multiple resources in the editor menus. When multiple resources are not allowed (default), you can load the single available resource by specifying just the actor ID, eg:</p> <div class="language-csharp extra-class"><pre class="language-csharp"><code><span class="token class-name"><span class="token keyword">var</span></span> resource <span class="token operator">=</span> <span class="token keyword">await</span> resourceLoader<span class="token punctuation">.</span><span class="token function">LoadAsync</span><span class="token punctuation">(</span>actorId<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>When multiple resources are allowed, specify full path; eg, given you've assigned a resource with &quot;CubeBackground&quot; name:</p> <p><img src="https://i.gyazo.com/64ff6d6dede1cc8c2c3be83cfe6a6d74.png" alt=""></p> <p>— to load the resource, use:</p> <div class="language-csharp extra-class"><pre class="language-csharp"><code><span class="token class-name"><span class="token keyword">var</span></span> resource <span class="token operator">=</span> <span class="token keyword">await</span> resourceLoader<span class="token punctuation">.</span><span class="token function">LoadAsync</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">$&quot;</span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">actorId</span><span class="token punctuation">}</span></span><span class="token string">/CubeBackground&quot;</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="custom-metadata"><a href="#custom-metadata" class="header-anchor">#</a> Custom Metadata</h2> <p>It's possible to add custom additional data to the actors metadata (of both built-in and custom implementations).</p> <p>To inject custom data, create a new C# class and inherit it from <code>CustomMetadata&lt;TActor&gt;</code> type, where <code>TActor</code> is the type of the actor implementation the data should be associated with. Below is an example of adding custom data to the characters of &quot;CustomCharacterImplementation&quot; implementation:</p> <div class="language-csharp extra-class"><pre class="language-csharp"><code><span class="token keyword">using</span> <span class="token namespace">Naninovel</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">UnityEngine</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyCharacterData</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">CustomMetadata<span class="token punctuation">&lt;</span>CustomCharacterImplementation<span class="token punctuation">&gt;</span></span></span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token class-name"><span class="token keyword">int</span></span> MyCustomInt<span class="token punctuation">;</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Range</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token number">0f</span><span class="token punctuation">,</span> <span class="token number">100f</span><span class="token punctuation">)</span></span><span class="token punctuation">,</span> <span class="token class-name">Tooltip</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">&quot;Tooltip for my custom range.&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token class-name"><span class="token keyword">float</span></span> MyCustomRange <span class="token operator">=</span> <span class="token number">50f</span><span class="token punctuation">;</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">ColorUsage</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token class-name">Color</span> MyCustomColor <span class="token operator">=</span> Color<span class="token punctuation">.</span>white<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Serializable fields of the created custom data class will be automatically exposed in the Naninovel editor menus, when actor with the associated implementation is selected.</p> <p><img src="https://i.gyazo.com/72f46feb74b6de568b299329500bd7d5.png" alt=""></p> <p>To access the custom data at runtime, use <code>GetCustomData&lt;TData&gt;()</code> method of <code>ActorMetadata</code> instance, where <code>TData</code> is the type of the custom data class, eg:</p> <div class="language-csharp extra-class"><pre class="language-csharp"><code><span class="token class-name"><span class="token keyword">var</span></span> charsConfig <span class="token operator">=</span> Engine<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetConfiguration</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>CharactersConfiguration<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name"><span class="token keyword">var</span></span> myCharMeta <span class="token operator">=</span> charsConfig<span class="token punctuation">.</span><span class="token function">GetMetadataOrDefault</span><span class="token punctuation">(</span><span class="token string">&quot;CharId&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name"><span class="token keyword">var</span></span> myCharData <span class="token operator">=</span> myCharMeta<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetCustomData</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>MyCharacterData<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Debug<span class="token punctuation">.</span><span class="token function">Log</span><span class="token punctuation">(</span>myCharData<span class="token punctuation">.</span>MyCustomInt<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="custom-metadata-editor"><a href="#custom-metadata-editor" class="header-anchor">#</a> Custom Metadata Editor</h3> <p>It's possible to customize the custom metadata editor via <a href="https://docs.unity3d.com/Manual/editor-PropertyDrawers.html" target="_blank" rel="noopener noreferrer">property drawers<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>. Below is an example on adding a property drawer, which will insert an extra label above the edited field.</p> <div class="language-csharp extra-class"><pre class="language-csharp"><code><span class="token comment">// Create an attribute to apply to the serialized fields;</span>
<span class="token comment">// don't forget to inherit it from `PropertyAttribute`.</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ExtraLabelAttribute</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">PropertyAttribute</span></span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">readonly</span> <span class="token class-name"><span class="token keyword">string</span></span> LabelText<span class="token punctuation">;</span>
    
    <span class="token keyword">public</span> ExtraLabelAttribute <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> labelText<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        LabelText <span class="token operator">=</span> labelText<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// Create the custom editor, that will used when drawing the affected fields.</span>
<span class="token comment">// The script should be inside an `Editor` folder, as it uses `UnityEditor` namespace.</span>
<span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">CustomPropertyDrawer</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token keyword">typeof</span><span class="token punctuation">(</span><span class="token type-expression class-name">ExtraLabelAttribute</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ExtraLabelPropertyDrawer</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">PropertyDrawer</span></span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">override</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> OnGUI <span class="token punctuation">(</span><span class="token class-name">Rect</span> rect<span class="token punctuation">,</span> <span class="token class-name">SerializedProperty</span> prop<span class="token punctuation">,</span> <span class="token class-name">GUIContent</span> label<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token class-name"><span class="token keyword">var</span></span> extraLabelAttribute <span class="token operator">=</span> attribute <span class="token keyword">as</span> <span class="token class-name">ExtraLabelAttribute</span><span class="token punctuation">;</span>
        
        rect<span class="token punctuation">.</span>height <span class="token operator">=</span> EditorGUIUtility<span class="token punctuation">.</span>singleLineHeight<span class="token punctuation">;</span>
        EditorGUI<span class="token punctuation">.</span><span class="token function">LabelField</span><span class="token punctuation">(</span>rect<span class="token punctuation">,</span> extraLabelAttribute<span class="token punctuation">.</span>LabelText<span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        rect<span class="token punctuation">.</span>y <span class="token operator">+=</span> EditorGUIUtility<span class="token punctuation">.</span>singleLineHeight <span class="token operator">+</span> 
                  EditorGUIUtility<span class="token punctuation">.</span>standardVerticalSpacing<span class="token punctuation">;</span>
        EditorGUI<span class="token punctuation">.</span><span class="token function">PropertyField</span><span class="token punctuation">(</span>rect<span class="token punctuation">,</span> prop<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">override</span> <span class="token return-type class-name"><span class="token keyword">float</span></span> GetPropertyHeight <span class="token punctuation">(</span><span class="token class-name">SerializedProperty</span> prop<span class="token punctuation">,</span> <span class="token class-name">GUIContent</span> label<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">return</span> EditorGUIUtility<span class="token punctuation">.</span>singleLineHeight <span class="token operator">*</span> <span class="token number">2</span> <span class="token operator">+</span> 
               EditorGUIUtility<span class="token punctuation">.</span>standardVerticalSpacing<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// Now you can use the attribute to apply the extra label to the serialized fields.</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyCharacterData</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">CustomMetadata<span class="token punctuation">&lt;</span>CustomCharacterImplementation<span class="token punctuation">&gt;</span></span></span>
<span class="token punctuation">{</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">ExtraLabel</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">&quot;Text from my custom property drawer&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token class-name"><span class="token keyword">string</span></span> MyCustomProperty<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Given the above implementation, our custom character data will now draw as following:</p> <p><img src="https://i.gyazo.com/294a9e2812d33ea3c863f9f53906b327.png" alt=""></p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>It's also possible to override built-in configuration editors as a whole; see <a href="/guide/custom-configuration.html#overriding-built-in-editors">custom configuration</a> guide for more information and examples.</p></div> <h2 id="custom-state"><a href="#custom-state" class="header-anchor">#</a> Custom State</h2> <p>To override or extend state type for your custom actor, you'll have to also <a href="/guide/engine-services.html#overriding-built-in-services">override the actor's manager</a>, as the state is serialized and applied to the managed actors there.</p> <div class="custom-block note"><p class="custom-block-title">NOTICE</p> <p>This applies for custom actor implementations of one of the built-in <code>IActor</code> interface derivatives (characters, backgrounds, text printers and choice handlers); if you've inherited your custom actor directly from <code>IActor</code>, there's no need to override the built-in managers to use a custom state — just create your own.</p> <p>In case you're looking to add a custom state for other systems (eg, UIs, game objects or components for various game mechanics outside of Naninovel), see <a href="/guide/state-management.html#custom-state">state management guide</a>.</p></div> <p>Below is an example on extending choice handler state by adding a <code>LastChoiceTime</code> field, which stores time of the last added choice. The time is printed to the console when the custom choice handler is shown.</p> <div class="language-csharp extra-class"><pre class="language-csharp"><code><span class="token comment">// Our extended state, that serializes the last choice time.</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyChoiceHandlerState</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">ChoiceHandlerState</span></span>
<span class="token punctuation">{</span>
    <span class="token comment">// This field is serializable and persist through game save-loads.</span>
    <span class="token keyword">public</span> <span class="token class-name"><span class="token keyword">string</span></span> LastChoiceTime<span class="token punctuation">;</span>

    <span class="token comment">// This method is invoked when saving the game;</span>
    <span class="token comment">// get the required data from the actor and store it with serializable fields.</span>
    <span class="token keyword">public</span> <span class="token keyword">override</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> OverwriteFromActor <span class="token punctuation">(</span><span class="token class-name">IChoiceHandlerActor</span> actor<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">base</span><span class="token punctuation">.</span><span class="token function">OverwriteFromActor</span><span class="token punctuation">(</span>actor<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>actor <span class="token keyword">is</span> <span class="token class-name">MyCustomChoiceHandler</span> myCustomChoiceHandler<span class="token punctuation">)</span>
            LastChoiceTime <span class="token operator">=</span> myCustomChoiceHandler<span class="token punctuation">.</span>LastChoiceTime<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// This method is invoked when loading the game;</span>
    <span class="token comment">// get the serialized data back and apply it to the actor.</span>
    <span class="token keyword">public</span> <span class="token keyword">override</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> ApplyToActor <span class="token punctuation">(</span><span class="token class-name">IChoiceHandlerActor</span> actor<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">base</span><span class="token punctuation">.</span><span class="token function">ApplyToActor</span><span class="token punctuation">(</span>actor<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>actor <span class="token keyword">is</span> <span class="token class-name">MyCustomChoiceHandler</span> myCustomChoiceHandler<span class="token punctuation">)</span>
            myCustomChoiceHandler<span class="token punctuation">.</span>LastChoiceTime <span class="token operator">=</span> LastChoiceTime<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// Our custom choice handler implementation, that uses the last choice time.</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyCustomChoiceHandler</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">UIChoiceHandler</span></span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> LastChoiceTime <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    
    <span class="token keyword">public</span> MyCustomChoiceHandler <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> id<span class="token punctuation">,</span> <span class="token class-name">ChoiceHandlerMetadata</span> metadata<span class="token punctuation">)</span> 
        <span class="token punctuation">:</span> <span class="token keyword">base</span><span class="token punctuation">(</span>id<span class="token punctuation">,</span> metadata<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">override</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> AddChoice <span class="token punctuation">(</span><span class="token class-name">ChoiceState</span> choice<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">base</span><span class="token punctuation">.</span><span class="token function">AddChoice</span><span class="token punctuation">(</span>choice<span class="token punctuation">)</span><span class="token punctuation">;</span>
        LastChoiceTime <span class="token operator">=</span> DateTime<span class="token punctuation">.</span>Now<span class="token punctuation">.</span><span class="token function">ToShortTimeString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">override</span> <span class="token return-type class-name">UniTask</span> ChangeVisibilityAsync <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">bool</span></span> visible<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">float</span></span> duration<span class="token punctuation">,</span> 
        <span class="token class-name">EasingType</span> easingType <span class="token operator">=</span> <span class="token keyword">default</span><span class="token punctuation">,</span> <span class="token class-name">CancellationToken</span> cancelToken <span class="token operator">=</span> <span class="token keyword">default</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        Debug<span class="token punctuation">.</span><span class="token function">Log</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">$&quot;Last choice time: </span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">LastChoiceTime</span><span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token keyword">base</span><span class="token punctuation">.</span><span class="token function">ChangeVisibilityAsync</span><span class="token punctuation">(</span>visible<span class="token punctuation">,</span> duration<span class="token punctuation">,</span> easingType<span class="token punctuation">,</span> cancelToken<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// Overriding the built-in choice handler manager to make it use our extended state.</span>
<span class="token comment">// The important step is to specify `MyChoiceHandlerState` in the generic types;</span>
<span class="token comment">// other modifications are just to fulfill the interface requirements. </span>
<span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">InitializeAtRuntime</span><span class="token attribute-arguments"><span class="token punctuation">(</span>@<span class="token keyword">override</span><span class="token punctuation">:</span> <span class="token keyword">typeof</span><span class="token punctuation">(</span><span class="token type-expression class-name">ChoiceHandlerManager</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyChoiceHandlerManager</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">ActorManager<span class="token punctuation">&lt;</span>IChoiceHandlerActor<span class="token punctuation">,</span> 
    MyChoiceHandlerState<span class="token punctuation">,</span> ChoiceHandlerMetadata<span class="token punctuation">,</span> 
    ChoiceHandlersConfiguration<span class="token punctuation">&gt;</span></span><span class="token punctuation">,</span> <span class="token class-name">IChoiceHandlerManager</span></span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> MyChoiceHandlerManager <span class="token punctuation">(</span><span class="token class-name">ChoiceHandlersConfiguration</span> config<span class="token punctuation">)</span>
        <span class="token punctuation">:</span> <span class="token keyword">base</span><span class="token punctuation">(</span>config<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token return-type class-name">UniTask<span class="token punctuation">&lt;</span>IChoiceHandlerActor<span class="token punctuation">&gt;</span></span> AddActorAsync <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> actorId<span class="token punctuation">,</span> 
        <span class="token class-name">ChoiceHandlerState</span> state<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">base</span><span class="token punctuation">.</span><span class="token function">AddActorAsync</span><span class="token punctuation">(</span>actorId<span class="token punctuation">,</span> state <span class="token keyword">as</span> <span class="token class-name">MyChoiceHandlerState</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token return-type class-name">ChoiceHandlerState</span> IActorManager<span class="token operator">&lt;</span>IChoiceHandlerActor<span class="token punctuation">,</span> 
        ChoiceHandlerState<span class="token punctuation">,</span> ChoiceHandlerMetadata<span class="token punctuation">,</span> 
        ChoiceHandlersConfiguration<span class="token operator">&gt;</span><span class="token punctuation">.</span>GetActorState <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> actorId<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">base</span><span class="token punctuation">.</span><span class="token function">GetActorState</span><span class="token punctuation">(</span>actorId<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Our custom choice handler will now keep the last added choice time and log it in the console, even if the last choice was added in a previous game session loaded from a save slot. You can store any amount of custom data in addition to the built-in actor state this way. For the supported serializable data types see <a href="https://docs.unity3d.com/Manual/script-Serialization.html" target="_blank" rel="noopener noreferrer">Unity's serialization guide<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">March 10, 2021</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/guide/custom-configuration.html" class="prev">
        Custom Configuration
      </a></span> <span class="next"><a href="/guide/custom-actor-shader.html">
        Custom Actor Shader
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.7282dbad.js" defer></script><script src="/assets/js/3.edd03593.js" defer></script><script src="/assets/js/17.2a490325.js" defer></script>
  </body>
</html>
